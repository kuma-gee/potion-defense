[gd_scene load_steps=14 format=3 uid="uid://dwepgd5dhngl5"]

[ext_resource type="Script" uid="uid://1dcpeuely0gj" path="res://potion/enemy/enemy.gd" id="1_d8e8n"]
[ext_resource type="PackedScene" uid="uid://cvb6005pohejp" path="res://assets/KayKit_Skeletons_1.0_FREE/characters/gltf/Skeleton_Mage.glb" id="2_qw62i"]
[ext_resource type="Script" uid="uid://cuspqvicid1n2" path="res://obstacles/helper/hit_box.gd" id="3_ut6fv"]
[ext_resource type="Script" uid="uid://bav8mlr6l6106" path="res://potion/hurtbox.gd" id="4_18d5k"]
[ext_resource type="Script" uid="uid://qmx6dl6rikwy" path="res://potion/enemy/spawn_attack.gd" id="5_qw62i"]
[ext_resource type="PackedScene" uid="uid://coo8mxuebhccj" path="res://magic/projectile.tscn" id="6_ut6fv"]
[ext_resource type="PackedScene" uid="uid://cp3cr67lwt4i0" path="res://potion/enemy/status.tscn" id="7_18d5k"]
[ext_resource type="PackedScene" uid="uid://cfoo8o7cqicqx" path="res://magic/muzzle.tscn" id="7_1215r"]
[ext_resource type="Script" uid="uid://bn80he875obc8" path="res://potion/effect/status/status_effect_manager.gd" id="8_fntyg"]
[ext_resource type="PackedScene" uid="uid://oneks4klv0fw" path="res://potion/enemy/damage_label.tscn" id="10_t2m1k"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ujkhk"]
size = Vector3(1, 1, 0.56640625)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_a31gv"]
radius = 0.6274414

[sub_resource type="CylinderShape3D" id="CylinderShape3D_b0un1"]
height = 1.7161865
radius = 0.4165039

[node name="Mage" type="CharacterBody3D" node_paths=PackedStringArray("hit_box", "animation_player", "hurt_box", "projectile_spawn")]
collision_layer = 4
script = ExtResource("1_d8e8n")
attack_anims = Array[String](["1H_Ranged_Shoot"])
hit_box = NodePath("Skeleton_Mage/HitBox")
animation_player = NodePath("Skeleton_Mage/AnimationPlayer")
hurt_box = NodePath("HurtBox")
projectile_spawn = NodePath("SpawnAttack")

[node name="Skeleton_Mage" parent="." instance=ExtResource("2_qw62i")]
transform = Transform3D(-0.8, 0, -6.9938224e-08, 0, 0.8, 0, 6.9938224e-08, 0, -0.8, 0, 0, 0)

[node name="Skeleton3D" parent="Skeleton_Mage/Rig" index="0"]
bones/1/position = Vector3(7.167187e-09, 0.3052199, -0.030061364)
bones/1/rotation = Quaternion(2.255949e-10, 0.17319314, 2.5649072e-09, 0.9848879)
bones/2/rotation = Quaternion(0.11676573, -0.12958969, 0.025773186, 0.98433125)
bones/2/scale = Vector3(1, 1, 1.0000001)
bones/3/rotation = Quaternion(0.28803912, 4.8643494e-09, 0.024932021, 0.95729405)
bones/4/position = Vector3(0.21200736, 0.13413227, 8.487841e-08)
bones/4/rotation = Quaternion(-0.7571306, -0.18807043, -0.521988, 0.344835)
bones/4/scale = Vector3(0.9999996, 0.99999887, 0.9999999)
bones/5/rotation = Quaternion(1.2396035e-08, -3.8567528e-08, -0.5969214, 0.80229986)
bones/6/rotation = Quaternion(-2.2151489e-10, 4.3565183e-09, 0.026658094, 0.99964464)
bones/7/rotation = Quaternion(-0.12350881, -0.60886705, 0.0056504095, 0.78357816)
bones/8/position = Vector3(-5.8769807e-08, 0.09612517, -0.057499975)
bones/8/rotation = Quaternion(-0.025259204, -0.0006135502, -0.50076216, 0.86521614)
bones/8/scale = Vector3(0.99999994, 0.99999994, 1)
bones/9/position = Vector3(-0.21200737, 0.13413244, 2.4517949e-08)
bones/9/rotation = Quaternion(-0.80520105, 0.1157037, 0.4300302, 0.39158398)
bones/10/rotation = Quaternion(3.7919712e-08, 4.9305164e-08, 0.48405516, 0.87503755)
bones/11/rotation = Quaternion(1.5096417e-08, 1.1073103e-08, -0.0266581, 0.99964464)
bones/12/rotation = Quaternion(-0.34175003, 0.41107857, -0.08770553, 0.84055287)
bones/13/position = Vector3(2.8967486e-08, 0.096125156, -0.057500005)
bones/13/rotation = Quaternion(2.1036433e-09, -1.1652535e-08, 0.7071068, 0.7071067)
bones/13/scale = Vector3(1.0000001, 1.0000001, 1.0000001)
bones/14/rotation = Quaternion(-0.27768075, -0.04581833, -0.003386969, 0.95957416)
bones/14/scale = Vector3(1, 1, 0.9999999)
bones/16/position = Vector3(0.17094506, 0.11358723, 1.1235642e-08)
bones/16/rotation = Quaternion(0.9246109, 0.13615187, 0.21878003, 0.2805219)
bones/17/rotation = Quaternion(0.63481843, 4.2565347e-08, -4.2386085e-07, 0.7726613)
bones/18/rotation = Quaternion(-0.60671633, -0.3695379, 0.19300313, 0.6768212)
bones/19/rotation = Quaternion(-0.00023579429, 0.9200985, -0.391687, 5.0720897e-05)
bones/20/position = Vector3(-0.17760509, 0.1135872, 0.07694323)
bones/20/rotation = Quaternion(0.9198509, -0.2307558, 0.28586495, 0.13750412)
bones/20/scale = Vector3(0.9999998, 0.9999999, 1.0000012)
bones/21/rotation = Quaternion(0.6413513, -5.4591105e-08, 4.6053796e-07, 0.7672475)
bones/22/rotation = Quaternion(-0.7294578, 0.11236462, -0.18634541, 0.64849126)
bones/23/rotation = Quaternion(0.00029580682, 0.9201205, -0.39163563, -6.258174e-05)
bones/24/position = Vector3(0.20272529, 0.2923103, 0.57581246)
bones/24/rotation = Quaternion(0.7071068, -2.2930234e-07, -4.6055177e-08, 0.7071068)
bones/25/position = Vector3(0.20218208, 0.025990263, 0.20518117)
bones/25/rotation = Quaternion(-0.7071068, -7.052851e-08, -7.0528486e-08, 0.7071068)
bones/26/rotation = Quaternion(9.040256e-09, 3.836138e-09, 0.9255537, -0.37861633)
bones/26/scale = Vector3(0.99999994, 0.99999994, 1)
bones/27/position = Vector3(3.7529446e-09, 0.21343616, -1.0726939e-08)
bones/27/rotation = Quaternion(-8.610213e-08, 0.39108434, 0.92035484, -3.111013e-08)
bones/29/rotation = Quaternion(1, 1.0931621e-08, 1.9087975e-07, -1.4901158e-08)
bones/30/rotation = Quaternion(1.3877937e-17, 3.7667942e-16, -1.9466935e-08, 1)
bones/31/position = Vector3(-0.35255206, 0.29231027, 0.5758123)
bones/31/rotation = Quaternion(0.7071068, -3.823849e-08, 1.4500867e-07, 0.7071068)
bones/32/rotation = Quaternion(-0.7071068, -7.0528515e-08, -7.05285e-08, 0.7071068)
bones/33/position = Vector3(1.9458106e-08, 0.28560174, 2.4286129e-15)
bones/33/rotation = Quaternion(-5.5977165e-09, 1.7713627e-09, 0.9557709, 0.2941122)
bones/34/position = Vector3(3.7529446e-09, 0.21343613, -1.0342986e-08)
bones/34/rotation = Quaternion(-1.0185213e-07, 0.39108434, 0.92035484, -2.4834694e-08)
bones/34/scale = Vector3(1, 0.99999994, 0.9999999)
bones/35/position = Vector3(-2.1212434e-08, 0.16565005, -9.36086e-09)
bones/35/rotation = Quaternion(-0.39108434, -6.8850014e-08, -6.5628754e-08, 0.92035484)
bones/36/rotation = Quaternion(1, 6.4469927e-09, 1.8628896e-07, 1.2552757e-15)
bones/37/rotation = Quaternion(-1.7694166e-16, -6.740986e-17, -1.946692e-08, 1)
bones/38/rotation = Quaternion(-0.7071068, -7.279511e-08, -7.279509e-08, 0.7071068)
bones/39/position = Vector3(0.52084064, 0.73145086, 0.037993073)
bones/39/rotation = Quaternion(0.89292866, 0.26879966, 0.35557586, 0.06317351)
bones/40/rotation = Quaternion(-0.7071068, -7.279511e-08, -7.279509e-08, 0.7071068)
bones/41/position = Vector3(-0.5442452, 0.74524903, -0.04110355)
bones/41/rotation = Quaternion(-0.8932757, 0.026557937, 0.43408206, 0.11369245)
bones/41/scale = Vector3(1, 1.0000001, 1)

[node name="Skeleton_Mage_Hat" parent="Skeleton_Mage/Rig/Skeleton3D" index="0"]
transform = Transform3D(0.99981403, -0.014102131, -0.013155997, 0.010184139, 0.9653388, -0.26080087, 0.016377866, 0.26061824, 0.965303, -0.007366818, 1.5674597, 0.3980968)

[node name="HitBox" type="Area3D" parent="Skeleton_Mage"]
transform = Transform3D(1.25, 0, 2.1316282e-14, 0, 1.25, 0, -2.1316282e-14, 0, 1.25, 0, 1.102, 10)
collision_layer = 0
collision_mask = 8
script = ExtResource("3_ut6fv")
damage = 0
metadata/_custom_type_script = "uid://cuspqvicid1n2"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Skeleton_Mage/HitBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.21679688)
shape = SubResource("BoxShape3D_ujkhk")

[node name="HurtBox" type="Area3D" parent="." node_paths=PackedStringArray("status_manager")]
collision_layer = 128
collision_mask = 0
script = ExtResource("4_18d5k")
status_manager = NodePath("../StatusEffectManager")
max_health = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0028687, -0.15148735)
shape = SubResource("CapsuleShape3D_a31gv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8600464, -0.103174105)
shape = SubResource("CylinderShape3D_b0un1")

[node name="SpawnAttack" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.83566314, -0.8687577)
script = ExtResource("5_qw62i")
attack_spawn = ExtResource("6_ut6fv")
muzzle_scane = ExtResource("7_1215r")

[node name="StatusEffectManager" type="Node" parent="."]
script = ExtResource("8_fntyg")
metadata/_custom_type_script = "uid://bn80he875obc8"

[node name="Status" parent="." node_paths=PackedStringArray("status_manager") instance=ExtResource("7_18d5k")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.6572467, 1.6073931, 0)
status_manager = NodePath("../StatusEffectManager")

[node name="DamageLabel" parent="." node_paths=PackedStringArray("hurt_box") instance=ExtResource("10_t2m1k")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.4190378, -0.16383338)
hurt_box = NodePath("../HurtBox")

[editable path="Skeleton_Mage"]
