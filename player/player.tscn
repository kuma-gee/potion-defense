[gd_scene load_steps=27 format=3 uid="uid://dsjo3xx3s5pje"]

[ext_resource type="Script" uid="uid://c6wwca7h8xf7f" path="res://player/player.gd" id="1_4flbx"]
[ext_resource type="Script" uid="uid://xqdtlyollsqn" path="res://player/player_movement.gd" id="2_g1dw6"]
[ext_resource type="Script" uid="uid://ceanc8yrpv7ov" path="res://player/player_animation.gd" id="2_qjkh3"]
[ext_resource type="PackedScene" uid="uid://olicgb1t6k84" path="res://assets/models/runner.glb" id="2_yw30f"]
[ext_resource type="Script" uid="uid://ch1gifjud7map" path="res://player/player_view_controller.gd" id="3_yw30f"]
[ext_resource type="Material" uid="uid://bhte32yr5w1n7" path="res://player/body_mat.tres" id="6_g6k8r"]
[ext_resource type="Material" uid="uid://cml2p3oqube1s" path="res://player/face_mat.tres" id="7_boad6"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yw30f"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hg6s5"]
animation = &"Running Turn 180"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qjkh3"]
animation = &"Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8t03j"]
animation = &"Standard Run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g6k8r"]
animation = &"Run To Stop"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rgyib"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hg6s5"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "has_motion()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8t03j"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "!has_motion()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2ieo8"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ebec5"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "has_motion()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wodsf"]
advance_mode = 2
advance_expression = "not has_motion()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_32hag"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "sprinting"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tqiix"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "not sprinting"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e7oew"]
advance_mode = 2
advance_expression = "is_turning() and has_motion()"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_c35mf"]
switch_mode = 2
advance_mode = 2
advance_expression = "not is_turning() and has_motion()"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_32hag"]
states/End/position = Vector2(943, 100)
states/Idle/node = SubResource("AnimationNodeAnimation_yw30f")
states/Idle/position = Vector2(364, 49)
states/Running/node = SubResource("AnimationNodeAnimation_qjkh3")
states/Running/position = Vector2(552, 49)
"states/Running Turn 180/node" = SubResource("AnimationNodeAnimation_hg6s5")
"states/Running Turn 180/position" = Vector2(742, 149)
"states/Standard Run/node" = SubResource("AnimationNodeAnimation_8t03j")
"states/Standard Run/position" = Vector2(742, 49)
states/Stop/node = SubResource("AnimationNodeAnimation_g6k8r")
states/Stop/position = Vector2(497, 143)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_rgyib"), "Idle", "Running", SubResource("AnimationNodeStateMachineTransition_hg6s5"), "Running", "Stop", SubResource("AnimationNodeStateMachineTransition_8t03j"), "Stop", "Idle", SubResource("AnimationNodeStateMachineTransition_2ieo8"), "Stop", "Running", SubResource("AnimationNodeStateMachineTransition_ebec5"), "Running Turn 180", "Stop", SubResource("AnimationNodeStateMachineTransition_wodsf"), "Running", "Standard Run", SubResource("AnimationNodeStateMachineTransition_32hag"), "Standard Run", "Running", SubResource("AnimationNodeStateMachineTransition_tqiix"), "Standard Run", "Running Turn 180", SubResource("AnimationNodeStateMachineTransition_e7oew"), "Running Turn 180", "Standard Run", SubResource("AnimationNodeStateMachineTransition_c35mf")]
graph_offset = Vector2(-110, -63)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_yw30f"]
graph_offset = Vector2(-531.2998, 140.54327)
nodes/output/position = Vector2(380, 120)
nodes/Move/node = SubResource("AnimationNodeStateMachine_32hag")
nodes/Move/position = Vector2(-160, 140)
node_connections = [&"output", 0, &"Move"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_sh265"]
radius = 0.08
height = 0.78808594

[sub_resource type="CylinderShape3D" id="CylinderShape3D_g1dw6"]
height = 0.6
radius = 0.1

[node name="Player" type="CharacterBody3D"]
collision_layer = 2
script = ExtResource("1_4flbx")

[node name="PlayerAnimation" type="AnimationTree" parent="." node_paths=PackedStringArray("player_move")]
root_node = NodePath("../Body/runner")
tree_root = SubResource("AnimationNodeBlendTree_yw30f")
anim_player = NodePath("../Body/runner/AnimationPlayer")
script = ExtResource("2_qjkh3")
player_move = NodePath("../PlayerMovement")

[node name="PlayerViewController" type="Node" parent="." node_paths=PackedStringArray("body", "camera_root", "camera")]
script = ExtResource("3_yw30f")
body = NodePath("../Body")
camera_root = NodePath("../CameraRoot")
camera = NodePath("../CameraRoot/Pivot/Camera3D")
metadata/_custom_type_script = "uid://ch1gifjud7map"

[node name="PlayerMovement" type="Node" parent="."]
script = ExtResource("2_g1dw6")
metadata/_custom_type_script = "uid://xqdtlyollsqn"

[node name="Body" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.40391627, 0)
shape = SubResource("CapsuleShape3D_sh265")

[node name="runner" parent="Body" instance=ExtResource("2_yw30f")]
transform = Transform3D(-0.5, 0, -4.371139e-08, 0, 0.5, 0, 4.371139e-08, 0, -0.5, 0, -0.4036945, 0)

[node name="Skeleton3D" parent="Body/runner/Armature_002" index="0"]
bones/0/position = Vector3(0.0039041329, 2.3626678e-09, 0.019819494)
bones/1/position = Vector3(0.0016498821, 0.92377436, 0.011672793)
bones/1/rotation = Quaternion(-0.0072539975, 0.011545048, -0.043671515, 0.998953)
bones/2/rotation = Quaternion(-0.03748717, -0.012642655, 0.0210265, 0.9989959)
bones/3/rotation = Quaternion(7.397588e-05, -0.0037363628, 0.05175699, 0.9986528)
bones/4/rotation = Quaternion(7.5086085e-05, 0.0015216657, 0.051402792, 0.9986769)
bones/5/rotation = Quaternion(0.054220702, -0.0012943445, -0.019220784, 0.9983432)
bones/6/rotation = Quaternion(0.018631991, 0.0068292324, -0.06995402, 0.99735284)
bones/8/rotation = Quaternion(-0.6129989, -0.4264246, 0.45357522, -0.48648137)
bones/9/rotation = Quaternion(0.65056896, 0.002153987, -0.112606905, 0.7510494)
bones/10/rotation = Quaternion(0.031901676, -0.0020360106, 0.14338663, 0.98915035)
bones/11/rotation = Quaternion(0.0050272834, 0.91259986, -0.17324476, 0.3703005)
bones/12/rotation = Quaternion(-0.17712261, -0.010345195, 0.17035876, 0.9692773)
bones/13/rotation = Quaternion(-0.12927346, 0.118300974, 0.075433575, 0.9816328)
bones/14/rotation = Quaternion(-0.06386718, 0.07038768, 0.03025421, 0.99501324)
bones/16/rotation = Quaternion(0.5675674, -0.48081174, 0.50129056, 0.44203523)
bones/17/rotation = Quaternion(0.54161644, 0.00044197743, 0.036801115, 0.83981967)
bones/18/rotation = Quaternion(0.034017794, 0.002728721, -0.16365673, 0.9859269)
bones/19/rotation = Quaternion(-0.10987137, 0.91492087, -0.25672904, -0.29144195)
bones/20/rotation = Quaternion(0.09194953, 0.9113923, -0.38828304, 0.10072626)
bones/21/rotation = Quaternion(0.16763535, -0.05284925, 0.07418662, 0.9816322)
bones/22/rotation = Quaternion(0.12508348, -0.018798728, 0.03521471, 0.9913429)
bones/24/rotation = Quaternion(0.11827861, 0.1462907, 0.9742726, -0.12410582)
bones/25/rotation = Quaternion(-0.21974225, -0.07848825, 0.017296595, 0.9722417)
bones/26/rotation = Quaternion(0.51126754, -0.09210713, -0.062075492, 0.8522139)
bones/27/rotation = Quaternion(0.30222344, 0.011229099, -0.00366492, 0.9531639)
bones/29/rotation = Quaternion(-0.038287725, -0.019379158, 0.9955582, -0.08380042)
bones/30/rotation = Quaternion(-0.07364304, 0.043829683, 0.044922683, 0.9953078)
bones/31/rotation = Quaternion(0.51287985, -0.004547539, -0.07247579, 0.85538346)
bones/32/rotation = Quaternion(0.34063306, -0.01664128, 0.0061532552, 0.94002897)

[node name="Body" parent="Body/runner/Armature_002/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("6_g6k8r")

[node name="Face" parent="Body/runner/Armature_002/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("7_boad6")

[node name="Hurtbox" type="Area3D" parent="Body"]
visible = false
collision_layer = 4
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Body/Hurtbox"]
shape = SubResource("CylinderShape3D_g1dw6")

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="Body"]
visible = false
radius = 0.1
height = 0.6

[node name="CameraRoot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.53269744, 0)

[node name="Pivot" type="SpringArm3D" parent="CameraRoot"]
spring_length = 2.0

[node name="Camera3D" type="Camera3D" parent="CameraRoot/Pivot"]
current = true

[editable path="Body/runner"]
